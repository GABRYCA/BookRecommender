<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane stylesheets="@styles.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="me.labb.bookrecommender.client.ClientController">
    <top>
        <VBox spacing="15" styleClass="header-section">
            <padding>
                <Insets bottom="15" left="20" right="20" top="20" />
            </padding>
            <HBox alignment="CENTER_LEFT" spacing="15">
                <Label styleClass="app-title" text="ðŸ“š Book Recommender">
                    <font>
                        <Font name="System Bold" size="24.0" />
                    </font>
                </Label>
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="statusLabel" styleClass="status-label" text="Non connesso" />
            </HBox>

            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="button-bar">
                <Button fx:id="connettiBtn" mnemonicParsing="false" onAction="#connetti" styleClass="action-button" text="Connetti" />
                <Button fx:id="disconnettiBtn" mnemonicParsing="false" onAction="#disconnetti" styleClass="action-button" text="Disconnetti" />
                <Separator orientation="VERTICAL" />
                <Button fx:id="loginBtn" mnemonicParsing="false" onAction="#login" styleClass="action-button" text="Login" />
                <Button fx:id="registratiBtn" mnemonicParsing="false" onAction="#registrati" styleClass="action-button" text="Registrati" />
                <Button fx:id="logoutBtn" mnemonicParsing="false" onAction="#logout" styleClass="action-button" text="Logout" />
            </HBox>
        </VBox>
    </top>

    <center>
        <VBox spacing="15" styleClass="content-section">
            <padding>
                <Insets bottom="10" left="20" right="20" top="10" />
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="search-section">
                <TextField fx:id="searchField" promptText="Cerca libri..." HBox.hgrow="ALWAYS" />
                <Button fx:id="cercaBtn" mnemonicParsing="false" onAction="#cercaLibri" styleClass="search-button" text="Cerca" />
                <ComboBox fx:id="categoriaComboBox" promptText="Categoria" prefWidth="150" />
                <Button fx:id="consigliaBtn" mnemonicParsing="false" onAction="#consigliaLibri" styleClass="recommend-button" text="Consiglia" />
                <Button fx:id="profiloBtn" mnemonicParsing="false" onAction="#visualizzaProfilo" styleClass="profile-button" text="Profilo" />
            </HBox>

            <TabPane VBox.vgrow="ALWAYS" styleClass="tabs-container">
                <Tab text="Risultati" closable="false">
                    <VBox spacing="10">
                        <Label fx:id="resultLabel" styleClass="section-title" text="" />
                        <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                            <VBox fx:id="resultContainer" spacing="8" styleClass="result-container" />
                        </ScrollPane>
                    </VBox>
                </Tab>

                <!-- Scheda per le Librerie -->
                <Tab text="Le Mie Librerie" closable="false">
                    <VBox spacing="10">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button fx:id="creaLibreriaBtn" text="Crea Nuova Libreria" onAction="#creaLibreria" styleClass="action-button" />
                            <Button fx:id="EliminaLibreriaBtn" text="Elimina Libreria" onAction="#EliminaLibreria" styleClass="action-button" />
                            <Button fx:id="aggiornaLibrerieBtn" text="Aggiorna" onAction="#aggiornaLibrerie" styleClass="action-button" />
                        </HBox>
                        <SplitPane dividerPositions="0.3" VBox.vgrow="ALWAYS">
                            <!-- Lista delle librerie -->
                            <VBox spacing="5">
                                <Label text="Le mie librerie:" styleClass="section-title" />
                                <ListView fx:id="librerieListView" VBox.vgrow="ALWAYS" />
                            </VBox>
                            <!-- Contenuto della libreria selezionata -->
                            <VBox spacing="5">
                                <HBox spacing="10" alignment="CENTER_LEFT">
                                    <Label fx:id="libreriaSelezionataLabel" text="Seleziona una libreria" styleClass="section-title" HBox.hgrow="ALWAYS" />
                                    <Button fx:id="aggiungiLibroBtn" text="Aggiungi Libro" onAction="#aggiungiLibroALibreria" styleClass="action-button" />
                                    <Button fx:id="rimuoviLibroBtn" text="Rimuovi Libro" onAction="#rimuoviLibroDaLibreria" styleClass="action-button" />
                                </HBox>
                                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                                    <VBox fx:id="libreriaContentContainer" spacing="8" styleClass="result-container" />
                                </ScrollPane>
                            </VBox>
                        </SplitPane>
                    </VBox>
                </Tab>

                <!-- Scheda per le Valutazioni -->
                <Tab text="Valutazioni" closable="false">
                    <VBox spacing="10">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button fx:id="valutaLibroBtn" text="Valuta un Libro" onAction="#mostraFormValutazione" styleClass="action-button" />
                            <Button fx:id="mieValutazioniBtn" text="Le Mie Valutazioni" onAction="#visualizzaMieValutazioni" styleClass="action-button" />
                            <TextField fx:id="libroIDValutazioniField" promptText="ID Libro" prefWidth="100" />
                            <Button fx:id="cercaValutazioniBtn" text="Cerca Valutazioni" onAction="#cercaValutazioniLibro" styleClass="action-button" />
                        </HBox>
                        <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                            <VBox fx:id="valutazioniContainer" spacing="8" styleClass="result-container" />
                        </ScrollPane>
                    </VBox>
                </Tab>

                <!-- Scheda per i Consigli -->
                <Tab text="Consigli" closable="false">
                    <VBox spacing="10">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="ID Libro:" />
                            <TextField fx:id="libroIDConsigliField" promptText="ID Libro" prefWidth="100" />
                            <Button fx:id="generaConsigliBtn" text="Genera Consigli" onAction="#generaConsigli" styleClass="action-button" />
                            <Button fx:id="mieiConsigliBtn" text="I Miei Consigli" onAction="#visualizzaMieiConsigli" styleClass="action-button" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button fx:id="salvaConsiglioBtn" text="Salva Consiglio" onAction="#salvaConsiglio" styleClass="action-button" />
                        </HBox>
                        <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                            <VBox fx:id="consigliContainer" spacing="8" styleClass="result-container" />
                        </ScrollPane>
                    </VBox>
                </Tab>

                <Tab text="Console" closable="false">
                    <TextArea fx:id="output" editable="false" wrapText="true" styleClass="console-output" VBox.vgrow="ALWAYS" />
                </Tab>
            </TabPane>
        </VBox>
    </center>

    <bottom>
        <HBox styleClass="footer" alignment="CENTER_RIGHT" spacing="10">
            <padding>
                <Insets bottom="10" left="20" right="20" top="10" />
            </padding>
            <Label styleClass="version-footer" text="Book Recommender v1.0" />
        </HBox>
    </bottom>
</BorderPane>
